# Ð¢ÐµÑÑ‚Ð¾Ð²Ð¾Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ðµ Boomerang Ð¡Ð ÐžÐš Ð”Ðž 28 Ð¤Ð•Ð’Ð ÐÐ›Ð¯ 2024 11:00

## Ð¡Ð´ÐµÐ»Ð°Ð¹Ñ‚Ðµ Todo List

Ð¡Ð´ÐµÐ»Ð°Ð¹Ñ‚Ðµ Todo List c Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ next.js, react-query, tailwind, typescript

Ð“Ð»Ð°Ð²Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸:

- ÐÐ° Ð³Ð»Ð°Ð²Ð½Ð¾Ð¼ ÑÐºÑ€Ð°Ð½Ðµ Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ Ñ‡Ñ‚Ð¾ ÑƒÐ³Ð¾Ð´Ð½Ð¾
- Ð¡Ñ‚Ð¸Ð»Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð±Ñ‹Ð»Ð¾ ÐºÑ€Ð°ÑÐ¸Ð²Ð¾ ðŸ¤©
- Ð¡Ñ‚Ð¸Ð»Ð¸ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‡ÐµÑ€ÐµÐ· `tailwind`
- Ð¡Ð¿Ð¸ÑÐ¾Ðº TODO Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ `/todo/create`
- Ð”ÐµÑ‚Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ TODO Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ `/todo/[id]`
- ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ TODO Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ `/todo/update/[id]`
- Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ TODO Ð² Ð´ÐµÑ‚Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸

Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸

- ÐÐµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ðµ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸ Ñ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð°Ð¼Ð¸ (ÐºÑ€Ð¾Ð¼Ðµ [shadcn/ui](https://ui.shadcn.com/))
- ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸, Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸, ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸ todo
  ÐœÐ¾Ð¶Ð½Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ [sonner](https://ui.shadcn.com/docs/components/sonner)

## Ð—Ð°Ð¿ÑƒÑÐº REST API ÑÐµÑ€Ð²ÐµÑ€Ð°

Ð’ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾Ð¼ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»Ðµ Ð¿Ñ€Ð¾Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÑƒÑŽ ÐºÐ¾Ð¼Ð¼Ð°Ð½Ð´Ñƒ ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€ Ð¿Ð¾ ÑÑÑ‹Ð»ÐºÐµ [http//:localhost:4000](http//:localhost:4000)

```bash
npm run server
```

- GET `http//:localhost:4000/todos` - Ð¡Ð¿Ð¸ÑÐ¾Ðº Todo
- POST `http//:localhost:4000/todos` - Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Todo
- GET `http//:localhost:4000/todos/1` - Todo Ñ id 1
- DELTE `http//:localhost:4000/todos/1` - ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ Todo Ñ id 1
- PATCH `http//:localhost:4000/todos/1` - Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Todo Ñ id 1

## React-Query

- [ÐžÑ„Ð¸Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ](https://tanstack.com/query/latest/docs/framework/react/overview)
- [Ð’Ð¸Ð´ÐµÐ¾ÑƒÑ€Ð¾Ðº Ð½Ð° Ñ€ÑƒÑÑÐºÐ¾Ð¼](https://www.youtube.com/watch?v=wLYCgE-g-Ek)

ÐÐ¸Ñ‡ÐµÐ³Ð¾ ÑÑ‚Ñ€Ð°ÑˆÐ½Ð¾Ð³Ð¾ ÐµÑÐ»Ð¸ Ð½Ðµ Ð·Ð½Ð°ÐµÑ‚Ðµ ÐºÐ°Ðº Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑÑ react-query.
ÐÐ¸Ð¶Ðµ ÐµÑÑ‚ÑŒ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½Ñ‹Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ñ‹

### ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹

- Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° `axios`

```ts
import axios from "axios";

export const api = axios.create({
  baseURL: process.env.API_URL, // Ð‘ÐµÑ€Ñ‘Ð¼ Ð¸Ð· .env Ñ„Ð°Ð¹Ð»Ð°
});
```

- Ð¢Ð¸Ð¿Ñ‹

```ts
export type Book = {
  id: number;
  title: string;
  // ...
};
```

- Ð—Ð°Ð¿Ñ€Ð¾Ñ

```ts
export type FetchBookByIdFilter = {
  id: number;
};

export const fetchBookById = async (filters: FetchBookByIdFilter) => {
  const { data } = await api.get<Book>(`/books/${filters.id}`);
  return data;
};
```

- ÐšÐ°ÑÑ‚Ð¾Ð¼Ð½Ñ‹Ð¹ Ñ…ÑƒÐº Ð´Ð»Ñ `GET` Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²

```ts
const useFetchBookById = async (filters: FetchBookByIdFilter) => {
  const query = useQuery({
    queryFn: fetchBookById(filters),
    queryKey: ["books", filters],
  });

  return [query.data ?? null, query] as const;
};
```

- ÐšÐ°ÑÑ‚Ð¾Ð¼Ð½Ñ‹Ð¹ Ñ…ÑƒÐº Ð´Ð»Ñ `POST`, `PATCH`, `DELETE` Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²

```ts
export const deleteBook = async () => {
  // ...
};

export const useDeleteBook = () => {
  const queryClient = useQueryClient();

  const mutation = useMutation({
    mutationFn: deleteBook,
    onSuccess: (data, varables) => {
      // queryClient.invalidateQueries({ queryKey: ['books'] });
      // queryClient.invalidateQueries({
      //   queryKey: ['books', {id: varables.id}]
      // });
      // Ð˜Ð»Ð¸
      queryClient.invalidateQueries({
        predicate(query) {
          return query.queryKey[0] === "books";
        },
      });
    },
  });

  return [mutation.mutate, mutation] as const;
};
```

- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ…ÑƒÐºÐ¾Ð²

```ts
const [books] = useFetchTodos();
const [books] = useFetchBookById({ id: bookId });
const [deleteBook] = useDeleteBook();

const onDelete = () => {
  deleteBook({ id: bookId });
};
```

<!-- This is a [Next.js](https://nextjs.org/) project bootstrapped with [`create-next-app`](https://github.com/vercel/next.js/tree/canary/packages/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `pages/index.tsx`. The page auto-updates as you edit the file.

[API routes](https://nextjs.org/docs/api-routes/introduction) can be accessed on [http://localhost:3000/api/hello](http://localhost:3000/api/hello). This endpoint can be edited in `pages/api/hello.ts`.

The `pages/api` directory is mapped to `/api/*`. Files in this directory are treated as [API routes](https://nextjs.org/docs/api-routes/introduction) instead of React pages.

This project uses [`next/font`](https://nextjs.org/docs/basic-features/font-optimization) to automatically optimize and load Inter, a custom Google Font.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js/) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/deployment) for more details. -->
